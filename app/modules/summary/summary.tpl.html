<div ng-show="vm.page === vm.SUMMARY_PAGE" class="cc-scroller--if-fixed cc-view-wrapper cc-summary-view">
    <h1 class="cc-title--big" ng-bind="ln.summary"></h1>

    <!-- For some reason, ng-show's not working here. However, ng-if is fine, too -->
    <cc-check-box
        ng-if="vm.showGeneralAgreement"
        class="cc-check-box-on-background"
        value="vm.generalAgreement" agreement="ln.combinedAgreement">
    </cc-check-box>

    <!-- For some reason, ng-show's not working here. However, ng-if is fine, too -->
    <cc-check-box
        ng-if="vm.showAgeAgreement"
        class="cc-check-box-on-background"
        value="vm.ageAgreement"
        label="ln.ageAgreement">
    </cc-check-box>

    <h2 class="cc-title--medium">{{ln.billingAddress}}</h2>
    <cc-address data="vm.invoiceAddress"></cc-address>
    <div class="cc-padded-line-seperator on-background"></div>

    <h2 class="cc-title--medium">{{ln.shippingAddress}}</h2>
    <cc-address data="vm.shippingAddress"></cc-address>
    <div class="cc-padded-line-seperator on-background"></div>

    <h2 class="cc-title--medium">{{ln.paymentMethod}}</h2>
    <div>{{vm.paymentMethod}}</div>
    <div class="cc-padded-line-seperator on-background"></div>

    <h2 class="cc-title--medium">{{ln.shippingMethod}}</h2>
    <div>{{vm.shippingMethod}}</div>
    <div class="cc-padded-line-seperator on-background"></div>

    <!-- This borrows some classes from the cart. I think the real problem is the
    seperation of cart, summary and thankyou page. This should all live in one directory
    called "checkout" or something like that. Then the styles could be named
    cc-checkout-list and be used across both screens. No? -->
        <div class="cc-content-box--padded">
            <ul class="cc-cart-list">
                <li ng-repeat="item in vm.items"
                    class="cc-cart-list__row">
                    <div class="cc-cart-list__row-image"
                         style="background-image: url({{ item.imageURL }})">
                    </div>
                    <div class="cc-cart-list__row-content">
                        <h2 class="cc-title--big">
                            {{item.name}}
                        </h2>
                        <div>
                            {{ln.listItemPrice}} {{item.price | currency}}
                        </div>
                        <div>
                            {{ln.listItemQty}} {{item.qty}}
                        </div>
                        <div class="cc-cart-list__row-total">
                            {{item.subtotal | currency}}
                        </div>
                    </div>
                </li>
            </ul>
            <!-- is that a candidate for a cc-total-box directive? -->
            <div ng-include="tpl.TOTALBOX"></div>
        </div>

    <a  ng-click="acceptedAgreements() && proceed()" 
        ng-disabled="!vm.acceptedAgreement" 
        ng-class="acceptedAgreements() ? 'cc-couch-action-button--stretched' : 'cc-couch-action-button--disabled--stretched'" 
        >{{ ln.buyButton }}
    </a>

    <cca-footer></cca-footer>
</div>

<div ng-show="vm.page === vm.THANK_YOU_PAGE" class="cc-view-wrapper cc-center cc-thank-you-view">
    <h1 class="cc-title--huge" >{{ ln.thankYouTitle }}</h1>
    <div>{{ ln.thankTouText }}</div>
        <a
        ng-click="navigationService.navigateToRootCategory()"
        class="cc-couch-action-button">{{ ln.continueShopping }}
    </a>

    <div ng-if="cfg.trustedShopsEnabled" class="cc-trusted-shops-thankyou">
        <div>
            <img class="cc-trusted-shops-dialog__image" ng-src="https://www.trustedshops.de/certificate/images/logo/trustedshops_{{ trustedShopsService.locale }}.jpg">

            <div ng-bind-html="ln.tsRegistrationBuyerProtection"></div>
        </div>

        <form id="formTShops" name="formTShops" method="post"+
                action="https://www.trustedshops.com/shop/protection.php"+
                target="_blank">

            <input name="_charset_" type="hidden" value="">
            <input name="shop_id" type="hidden" value="{{ cfg.trustedShopsId }}">
            <input name="email" type="hidden" value="">
            <input name="amount" type="hidden" value="{{ summary.total }}">
            <input name="curr" type="hidden" value="{{ cfg.currency }}">
            <input name="paymentType" type="hidden" value="{{ vm.trustedShopsPaymentIdentifier }}">
            <input name="kdnr" type="hidden" value="-">
            <input name="ordernr" type="hidden" value="-">

            <input type="submit" class="cc-couch-action-button" value="{{ ln.tsButtonBuyerProtection }}">
        </form>
    </div>

    <!-- TODO: get rid of this z-index hack -->
    <div class="cc-expand" style="z-index: -1">
        <cca-footer class="cc-cart-footer"></cca-footer>
    </div>
</div>